<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <title>Danh sÃ¡ch tá»« vá»±ng</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>

<body>
  <!-- Ná»™i dung chÃ­nh -->
  <div class="main">
    <h1><span class="material-symbols-outlined">menu_book</span> Danh sÃ¡ch cÃ¡c bá»™ tá»« vá»±ng</h1>
    <!-- Tháº» vocab-card sáº½ Ä‘Æ°á»£c thÃªm Ä‘á»™ng báº±ng JavaScript -->
  </div>

  <!-- NhÃ¢n váº­t minh hoáº¡ -->
  <img src="/images/icon.png" class="corner-image" alt="nhÃ¢n váº­t há»c sinh" />

  <script>
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("show");
    }

    // Load danh sÃ¡ch tá»« backend
    window.onload = async function () {
      const res = await fetch("/vocab-sets");
      const sets = await res.json();
      const container = document.querySelector(".main");

      sets.forEach(set => {
        const card = document.createElement("div");
        card.className = "vocab-card";
        card.innerHTML = `
          <div class="icon-box red"><span class="material-symbols-outlined">library_books</span></div>
          <div class="content"><h3>Bá»™ tá»«: ${set.name_btv}</h3></div>
          <div class="actions">
              <button class="btn view" onclick="viewSet(${set.id_btv})">ğŸ‘ Xem</button>
              <button class="btn edit" onclick="editSet(${set.id_btv})">âœï¸ Sá»­a</button>
              <button class="btn delete" onclick="deleteSet(${set.id_btv})">ğŸ—‘ XÃ³a</button>
          </div>
        `;
        container.appendChild(card);
      });
    };

    // ğŸ‘‰ Xem chi tiáº¿t (chuyá»ƒn sang flashcard)
    function viewSet(id) {
      window.location.href = `/flashcard?id=${id}`;
    }

    // ğŸ‘‰ Sá»­a bá»™ (cÃ³ thá»ƒ chuyá»ƒn Ä‘áº¿n form sá»­a náº¿u cÃ³)
    function editSet(id) {
  window.location.href = `/create?edit=${id}`;
}
    // ğŸ‘‰ XÃ³a bá»™
    async function deleteSet(id) {
      const confirmed = confirm("Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a bá»™ nÃ y?");
      if (!confirmed) return;

      const res = await fetch(`/vocab-sets/${id}`, { method: "DELETE" });
      const data = await res.json();
      alert(data.message || data.error);
      window.location.reload();
    }
  </script>
</body>

</html>
